---
import BaseLayout from "../../layouts/BaseLayout.astro";
import PageHero from "../../components/astro/PageHero.astro";
import Card from "../../components/astro/Card.astro";
import { posts } from "../../data/blog.js";

const sorted = [...posts].sort((a, b) => (a.date < b.date ? 1 : -1));
const featured = sorted[0];
const rest = sorted.slice(1);
---

<BaseLayout title="Blog" description="Updates, guidance, and recruitment insights.">
  <PageHero
    badge="Updates"
    title="Blog"
    subtitle="Practical guidance about recruitment steps, documents, and preparation."
    ctaHref="/contact"
    ctaLabel="Ask a Question"
  />

  <section class="bg-slate-50">
    <div class="container mx-auto px-4 py-12 md:py-16 lg:py-20">
      <!-- Featured -->
      {featured && (
        <a href={`/blog/${featured.slug}`} class="no-underline block">
          <div class="rounded-3xl bg-white p-7 md:p-10 shadow-soft ring-1 ring-slate-200 hover:ring-slate-300 transition">
            <div class="flex flex-wrap items-center gap-3">
              <span class="inline-flex items-center rounded-full bg-brand-navy/5 px-3 py-1 text-xs font-bold text-brand-navy ring-1 ring-brand-navy/10">
                Featured
              </span>
              <span class="text-xs font-semibold text-slate-500">{featured.date}</span>
            </div>

            <h2 class="mt-4 text-2xl md:text-3xl font-extrabold tracking-tight text-slate-900">
              {featured.title}
            </h2>
            <p class="mt-3 max-w-3xl text-slate-600">
              {featured.excerpt}
            </p>

            <div class="mt-6 inline-flex items-center gap-2 text-sm font-extrabold text-brand-navy">
              Read article <span aria-hidden="true">→</span>
            </div>
          </div>
        </a>
      )}

      <!-- Grid -->
      {rest.length > 0 && (
        <div class="mt-10 md:mt-12 grid gap-6 md:grid-cols-2 lg:grid-cols-3">
          {rest.map((p) => (
            <a href={`/blog/${p.slug}`} class="no-underline block">
              <Card eyebrow={p.date} title={p.title} text={p.excerpt}>
                <div class="mt-4 inline-flex items-center gap-2 text-sm font-extrabold text-brand-navy">
                  Read more <span aria-hidden="true">→</span>
                </div>
              </Card>
            </a>
          ))}
        </div>
      )}

      <!-- Bottom CTA -->
      <div class="mt-12 md:mt-16 rounded-3xl bg-brand-navy p-8 md:p-10 text-white shadow-soft">
        <h3 class="text-xl md:text-2xl font-extrabold">Need a checklist for your destination?</h3>
        <p class="mt-3 max-w-2xl text-white/80">
          Contact us and we’ll share what you need based on the job role and destination requirements.
        </p>
        <div class="mt-6 flex flex-wrap gap-3">
          <a
            href="/contact"
            class="no-underline rounded-2xl bg-brand-gold px-6 py-3 font-extrabold text-slate-900 shadow-soft hover:opacity-95"
          >
            Contact Us
          </a>
          <a
            href="/services"
            class="no-underline rounded-2xl bg-white/10 px-6 py-3 font-semibold text-white ring-1 ring-white/25 hover:bg-white/15"
          >
            Browse Services
          </a>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>
